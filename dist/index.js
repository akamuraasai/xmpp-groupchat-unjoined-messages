'use strict';function _toArray(arr){return Array.isArray(arr)?arr:Array.from(arr)}var pathChild=function pathChild(_ref){var _ref2=_toArray(_ref),head=_ref2[0],rest=_ref2.slice(1);return function(obj){var child=obj[head];if(child===undefined)return obj;if(rest.length>0)return pathChild(rest)(child);return child}};var prepareMessage=pathChild(['event','updated','published','0','message']);var isGroupChat=function isGroupChat(obj){return obj.type==='groupchat'};var isChatMessage=function isChatMessage(obj){return obj.body!==undefined};var allPass=function allPass(item){return function(){for(var _len=arguments.length,conditions=Array(_len),_key=0;_key<_len;_key++){conditions[_key]=arguments[_key]}return conditions.every(function(func){return func(item)})}};module.exports=function(client){client.on('pubsub:published',function(event){var message=prepareMessage(event);if(allPass(message)(isGroupChat,isChatMessage)){client.emit('pubsub:published:message',message)}})};
